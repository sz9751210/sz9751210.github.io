<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kubernetes Deployment：Overview | 艾倫的程式之旅</title>
<meta name=keywords content="kubernetes,k8s,k8s-deployment,deployment"><meta name=description content="k8s-deployment"><meta name=author content="Alan"><link rel=canonical href=https://sz9751210.github.io/posts/k8s-deploy/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://sz9751210.github.io/assets/profile/avatar.png><link rel=icon type=image/png sizes=16x16 href=https://sz9751210.github.io/assets/profile/avatar.png><link rel=icon type=image/png sizes=32x32 href=https://sz9751210.github.io/assets/profile/avatar.png><link rel=apple-touch-icon href=https://sz9751210.github.io/assets/profile/avatar.png><link rel=mask-icon href=https://sz9751210.github.io/assets/profile/avatar.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-4RLTP9J7DY"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4RLTP9J7DY",{anonymize_ip:!1})}</script><meta property="og:title" content="Kubernetes Deployment：Overview"><meta property="og:description" content="k8s-deployment"><meta property="og:type" content="article"><meta property="og:url" content="https://sz9751210.github.io/posts/k8s-deploy/"><meta property="og:image" content="https://sz9751210.github.io/assets/k8s-deploy/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-30T15:53:00+08:00"><meta property="article:modified_time" content="2023-07-18T21:21:34+08:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sz9751210.github.io/assets/k8s-deploy/cover.png"><meta name=twitter:title content="Kubernetes Deployment：Overview"><meta name=twitter:description content="k8s-deployment"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sz9751210.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Kubernetes Deployment：Overview","item":"https://sz9751210.github.io/posts/k8s-deploy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kubernetes Deployment：Overview","name":"Kubernetes Deployment：Overview","description":"k8s-deployment","keywords":["kubernetes","k8s","k8s-deployment","deployment"],"articleBody":"什麼是 Kubernetes Deployment? 一樣先來個官網解說\nA Deployment provides declarative updates for Pods and ReplicaSets.\nYou describe a desired state in a Deployment, and the Deployment Controller changes the actual state to the desired state at a controlled rate. You can define Deployments to create new ReplicaSets, or to remove existing Deployments and adopt all their resources with new Deployments.\n跟ReplicaSet不同，Deployment的工作主要是為 pod \u0026 replicaset 提供了一個宣告式的設定 \u0026 更新方式，透過定義 desired status，Deployment controller 會在所謂的 controlled rate 下達到使用者所期望的狀態，這些機制是由 k8s 自動化完成，因此官方建議應該透過 Deployment 來佈署 pod \u0026 replicaset。\n為什麼需要Deployment 因為Pod無法實現自我更新，必須砍掉重建後才會是新的內容，這樣會導致服務中斷，有了Deployment的出現，對Pod進行管理與版本控制，而在Deployment的背後使用Replicaset來確保指定數量的Pod運行，在更新方面，可根據指定的更新策略來控制版本更新。\nDeployment是如何運作的 在k8s中，Pod是最小的資源單位，Pod的副本管理是透過Replicaset實現，而Deployment則是控制Replicaset，並不是直接對Pod進行管理。\n甚麼時候使用Deployment Deployment 在以下情況下適合使用：\n應用程式的部署和管理：Deployment 提供了一個方便且可靠的方式來部署和管理應用程式。它允許您定義應用程式的配置，包括容器映像、資源需求、環境變數等，並確保指定數量的 Pod 在運行。\n滾動更新和回滾：當需要對應用程式進行更新時，Deployment 提供了滾動更新的能力。它可以逐步部署新版本的應用程式，同時確保舊版本的 Pod 在新版本完全運行之前持續提供服務。如果新版本出現問題，Deployment 還允許回滾到先前的版本。\n應用程式的擴展性和負載均衡：Deployment 允許指定應用程式的副本數，以根據需求自動擴展或收縮應用程式的副本數。這使得應用程式能夠彈性地應對流量的變化，確保高效的資源利用和良好的用戶體驗。\n高可用性和容錯能力：Deployment 通過管理多個 Pod 的運行，提供了高可用性和容錯能力。如果某個 Pod 發生故障或需要進行維護，Deployment 會自動替換它，確保應用程式持續運行並提供無中斷的服務。\n多環境部署：如果需要在不同的環境中部署應用程式（如開發、測試、正式），Deployment 提供了一致的部署方式，確保在不同環境中的應用程式配置和版本的一致性，簡化了部署和管理的流程。\nDeployment有哪些特性 產生並管理 ReplicaSet：Deployment 可以自動創建和管理與其關聯的 ReplicaSet 物件。ReplicaSet 確保指定數量的 Pod 實例正在運行，並根據 Deployment 物件的配置來維護所需的 Pod 數量。\n滾動更新和回滾：Deployment 提供了滾動更新的能力，使您能夠逐步將新版本的應用程式部署到生產環境中，同時確保舊版本的 Pod 在新版本完全運行之前持續提供服務。如果新版本出現問題，Deployment 還允許您輕鬆地回滾到先前的版本。\n健康檢查和自我修復：Deployment 可以定期檢查 Pod 的健康狀態，並根據定義的健康檢查條件進行自我修復。如果 Pod 遇到故障或不符合健康檢查條件，Deployment 會自動替換該 Pod，以確保應用程式的高可用性。\n部署策略：Deployment 允許您指定部署策略，例如最大並行部署數量、最大不可用 Pod 數量等。這些策略可用於控制部署的速度和可靠性，並減少對應用程式的影響。\n環境變數和資源配置：Deployment 允許您在運行中的應用程式上動態配置環境變數和資源需求。這使得在不中斷服務的情況下，可以調整應用程式的配置，例如修改連接字串、調整內存和CPU的資源分配等。\n多環境部署：Deployment 可以用於在不同環境（如開發、測試、生產）中部署應用程式，並提供一致的部署方式和管理能力。這使得在不同環境中保持應用程式配置和版本的一致性變得更容易。\n如何使用Deployment 創建deployment apiVersion: apps/v1 # 定義api版本 kind: Deployment # 定義資源類型 metadata: # 定義元數據 name: nginx-deployment labels: app: nginx spec: strategy: type: RollingUpdate # 更新策略 rollingUpdate: maxUnavailable: 25% # 當更新時，無法使用的Pod佔整體Pod數量的比例 maxSurge: 25% # 當更新時，Pod可以超過desired status數量的比例 progressDeadlineSeconds: 600 # 部屬的最長等待時間，當超過則回報\"failed progressing\" minReadySeconds: 0 # 服務部屬後準備到可接收流量的時間 revisionHistoryLimit: 10 # 可rollback的版本數 replicas: 3 # 副本數 selector: # 定義label selector matchLabels: app: nginx template: # pod template metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.14.2 ports: - containerPort: 80 resources: requests: cpu: 200m memory: 512Mi 查看Deployment \u003e kubectl get deployments.apps NAME READY UP-TO-DATE AVAILABLE AGE nginx-deployment 3/3 3 3 24m \u003e kubectl get deployments.apps -o wide NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR nginx-deployment 3/3 3 3 24m nginx nginx:1.8 app=nginx 更新Deployment 更新image版本 \u003e kubectl set image deployment nginx-deployment nginx=nginx:1.9 deployment.apps/nginx-deployment image updated \u003e kubectl get deployments.apps -o wide NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR nginx-deployment 3/3 1 3 37m nginx nginx:1.9 app=nginx 查看更新狀態 \u003e kubectl rollout status deployment nginx-deployment deployment \"nginx-deployment\" successfully rolled out 修改pod template \u003e kubectl edit deployment nginx-deployment 回退Deployment 檢查Deployment的升級歷史紀錄 \u003e kubectl rollout history deployment nginx-deployment deployment.apps/nginx-deployment REVISION CHANGE-CAUSE 1 nginx:1.7.9 2 nginx:1.8 查看特定版本的紀錄 \u003e kubectl rollout history deployment nginx-deployment --revision=2 deployment.apps/nginx-deployment with revision #2 Pod Template: Labels: app=nginx pod-template-hash=58f44756c Annotations: kubernetes.io/change-cause: nginx:1.8 Containers: nginx: Image: nginx:1.8 Port: 80/TCP Host Port: 0/TCP Environment: Mounts: Volumes: 回退到指定版本 \u003e kubectl rollout undo deployment nginx-deployment --to-revision 1 deployment.apps/nginx-deployment rolled back 擴縮Deployment 指定數量 \u003e kubectl scale deployment nginx-deployment --replicas 2 deployment.apps/nginx-deployment scaled 水平自動擴縮，根據當前Pod的CPU利用率當作擴縮依據 kubectl autoscale deployment nginx-deployment --max 5 --min 3 --cpu-percent 70 如果是使用minikube，得啟用metrics-server的addon\nminikube addons list ## 查看minikube的addon minikube addons enable metrics-server ## 啟用metrics-server的addon\n暫停和恢復Deployment \u003e kubectl rollout pause deployment nginx-deployment deployment.apps/nginx-deployment paused \u003e kubectl rollout resume deployment nginx-deployment deployment.apps/nginx-deployment resumed 在暫停期間任意修改deployment都不會更新，暫停前的狀態將繼續它的功能\nDeployment cheat sheet Reference Deployments | Kubernetes Deployment · Kubernetes 中文指南——云原生应用架构实战手册 (jimmysong.io) Kubernetes 那些事 — Deployment 與 ReplicaSet（一） | by Andy Chen | Andy的技術分享blog | Medium ","wordCount":"453","inLanguage":"en","image":"https://sz9751210.github.io/assets/k8s-deploy/cover.png","datePublished":"2023-05-30T15:53:00+08:00","dateModified":"2023-07-18T21:21:34+08:00","author":{"@type":"Person","name":"Alan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sz9751210.github.io/posts/k8s-deploy/"},"publisher":{"@type":"Organization","name":"艾倫的程式之旅","logo":{"@type":"ImageObject","url":"https://sz9751210.github.io/assets/profile/avatar.png"}}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8214206744217848" crossorigin=anonymous></script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sz9751210.github.io/ accesskey=h title="Alan's BLOG (Alt + H)"><img src=https://sz9751210.github.io/assets/profile/avatar.png alt aria-label=logo height=35>Alan's BLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sz9751210.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://sz9751210.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://sz9751210.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://sz9751210.github.io/about/ title=about><span>about</span></a></li><li><a href=https://sz9751210.github.io/quote/ title=quote><span>quote</span></a></li><li><a href=https://sz9751210.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post autonumbering><header class=post-header><div class=breadcrumbs><a href=https://sz9751210.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://sz9751210.github.io/posts/>Posts</a></div><h1 class=post-title>Kubernetes Deployment：Overview</h1><div class=post-description>k8s-deployment</div><div class=post-meta><span title="2023-05-30 15:53:00 +0800 CST">2023-05-30</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;453 words&nbsp;·&nbsp;Alan</div></header><figure class=entry-cover1><img loading=lazy src=https://sz9751210.github.io/assets/k8s-deploy/cover.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%bb%80%e9%ba%bc%e6%98%af-kubernetes-deployment aria-label="什麼是 Kubernetes Deployment?">什麼是 Kubernetes Deployment?</a></li><li><a href=#%e7%82%ba%e4%bb%80%e9%ba%bc%e9%9c%80%e8%a6%81deployment aria-label=為什麼需要Deployment>為什麼需要Deployment</a></li><li><a href=#deployment%e6%98%af%e5%a6%82%e4%bd%95%e9%81%8b%e4%bd%9c%e7%9a%84 aria-label=Deployment是如何運作的>Deployment是如何運作的</a></li><li><a href=#%e7%94%9a%e9%ba%bc%e6%99%82%e5%80%99%e4%bd%bf%e7%94%a8deployment aria-label=甚麼時候使用Deployment>甚麼時候使用Deployment</a></li><li><a href=#deployment%e6%9c%89%e5%93%aa%e4%ba%9b%e7%89%b9%e6%80%a7 aria-label=Deployment有哪些特性>Deployment有哪些特性</a></li><li><a href=#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8deployment aria-label=如何使用Deployment>如何使用Deployment</a><ul><li><a href=#%e5%89%b5%e5%bb%badeployment aria-label=創建deployment>創建deployment</a></li><li><a href=#%e6%9f%a5%e7%9c%8bdeployment aria-label=查看Deployment>查看Deployment</a></li><li><a href=#%e6%9b%b4%e6%96%b0deployment aria-label=更新Deployment>更新Deployment</a></li><li><a href=#%e5%9b%9e%e9%80%80deployment aria-label=回退Deployment>回退Deployment</a></li><li><a href=#%e6%93%b4%e7%b8%aedeployment aria-label=擴縮Deployment>擴縮Deployment</a></li><li><a href=#%e6%9a%ab%e5%81%9c%e5%92%8c%e6%81%a2%e5%be%a9deployment aria-label=暫停和恢復Deployment>暫停和恢復Deployment</a></li></ul></li><li><a href=#deployment-cheat-sheet aria-label="Deployment cheat sheet">Deployment cheat sheet</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=什麼是-kubernetes-deployment>什麼是 Kubernetes Deployment?<a hidden class=anchor aria-hidden=true href=#什麼是-kubernetes-deployment>#</a></h2><p>一樣先來個官網解說</p><blockquote><p>A <em>Deployment</em> provides declarative updates for <a href=https://kubernetes.io/docs/concepts/workloads/pods/>Pods</a> and <a href=https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/>ReplicaSets</a>.</p></blockquote><blockquote><p>You describe a <em>desired state</em> in a Deployment, and the Deployment <a href=https://kubernetes.io/docs/concepts/architecture/controller/>Controller</a> changes the actual state to the desired state at a controlled rate. You can define Deployments to create new ReplicaSets, or to remove existing Deployments and adopt all their resources with new Deployments.</p></blockquote><p>跟ReplicaSet不同，Deployment的工作主要是為 pod & replicaset 提供了一個宣告式的設定 & 更新方式，透過定義 desired status，Deployment controller 會在所謂的 <strong>controlled rate</strong> 下達到使用者所期望的狀態，這些機制是由 k8s 自動化完成，因此官方建議應該透過 Deployment 來佈署 pod & replicaset。</p><h2 id=為什麼需要deployment>為什麼需要Deployment<a hidden class=anchor aria-hidden=true href=#為什麼需要deployment>#</a></h2><p>因為Pod無法實現自我更新，必須砍掉重建後才會是新的內容，這樣會導致服務中斷，有了Deployment的出現，對Pod進行管理與版本控制，而在Deployment的背後使用Replicaset來確保指定數量的Pod運行，在更新方面，可根據指定的更新策略來控制版本更新。</p><h2 id=deployment是如何運作的>Deployment是如何運作的<a hidden class=anchor aria-hidden=true href=#deployment是如何運作的>#</a></h2><p>在k8s中，Pod是最小的資源單位，Pod的副本管理是透過Replicaset實現，而Deployment則是控制Replicaset，並不是直接對Pod進行管理。</p><h2 id=甚麼時候使用deployment>甚麼時候使用Deployment<a hidden class=anchor aria-hidden=true href=#甚麼時候使用deployment>#</a></h2><p>Deployment 在以下情況下適合使用：</p><ol><li><p>應用程式的部署和管理：Deployment 提供了一個方便且可靠的方式來部署和管理應用程式。它允許您定義應用程式的配置，包括容器映像、資源需求、環境變數等，並確保指定數量的 Pod 在運行。</p></li><li><p>滾動更新和回滾：當需要對應用程式進行更新時，Deployment 提供了滾動更新的能力。它可以逐步部署新版本的應用程式，同時確保舊版本的 Pod 在新版本完全運行之前持續提供服務。如果新版本出現問題，Deployment 還允許回滾到先前的版本。</p></li><li><p>應用程式的擴展性和負載均衡：Deployment 允許指定應用程式的副本數，以根據需求自動擴展或收縮應用程式的副本數。這使得應用程式能夠彈性地應對流量的變化，確保高效的資源利用和良好的用戶體驗。</p></li><li><p>高可用性和容錯能力：Deployment 通過管理多個 Pod 的運行，提供了高可用性和容錯能力。如果某個 Pod 發生故障或需要進行維護，Deployment 會自動替換它，確保應用程式持續運行並提供無中斷的服務。</p></li><li><p>多環境部署：如果需要在不同的環境中部署應用程式（如開發、測試、正式），Deployment 提供了一致的部署方式，確保在不同環境中的應用程式配置和版本的一致性，簡化了部署和管理的流程。</p></li></ol><h2 id=deployment有哪些特性>Deployment有哪些特性<a hidden class=anchor aria-hidden=true href=#deployment有哪些特性>#</a></h2><ol><li><p>產生並管理 ReplicaSet：Deployment 可以自動創建和管理與其關聯的 ReplicaSet 物件。ReplicaSet 確保指定數量的 Pod 實例正在運行，並根據 Deployment 物件的配置來維護所需的 Pod 數量。</p></li><li><p>滾動更新和回滾：Deployment 提供了滾動更新的能力，使您能夠逐步將新版本的應用程式部署到生產環境中，同時確保舊版本的 Pod 在新版本完全運行之前持續提供服務。如果新版本出現問題，Deployment 還允許您輕鬆地回滾到先前的版本。</p></li><li><p>健康檢查和自我修復：Deployment 可以定期檢查 Pod 的健康狀態，並根據定義的健康檢查條件進行自我修復。如果 Pod 遇到故障或不符合健康檢查條件，Deployment 會自動替換該 Pod，以確保應用程式的高可用性。</p></li><li><p>部署策略：Deployment 允許您指定部署策略，例如最大並行部署數量、最大不可用 Pod 數量等。這些策略可用於控制部署的速度和可靠性，並減少對應用程式的影響。</p></li><li><p>環境變數和資源配置：Deployment 允許您在運行中的應用程式上動態配置環境變數和資源需求。這使得在不中斷服務的情況下，可以調整應用程式的配置，例如修改連接字串、調整內存和CPU的資源分配等。</p></li><li><p>多環境部署：Deployment 可以用於在不同環境（如開發、測試、生產）中部署應用程式，並提供一致的部署方式和管理能力。這使得在不同環境中保持應用程式配置和版本的一致性變得更容易。</p></li></ol><h2 id=如何使用deployment>如何使用Deployment<a hidden class=anchor aria-hidden=true href=#如何使用deployment>#</a></h2><h3 id=創建deployment>創建deployment<a hidden class=anchor aria-hidden=true href=#創建deployment>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1                    </span><span class=w> </span><span class=c># 定義api版本</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment                       </span><span class=w> </span><span class=c># 定義資源類型  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>                               </span><span class=c># 定義元數據</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span><span class=w>                       
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>RollingUpdate            </span><span class=w> </span><span class=c># 更新策略</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>rollingUpdate</span><span class=p>:</span><span class=w>                
</span></span></span><span class=line><span class=cl><span class=w>	  </span><span class=nt>maxUnavailable</span><span class=p>:</span><span class=w> </span><span class=m>25</span><span class=l>%          </span><span class=w> </span><span class=c># 當更新時，無法使用的Pod佔整體Pod數量的比例</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span><span class=nt>maxSurge</span><span class=p>:</span><span class=w> </span><span class=m>25</span><span class=l>%                </span><span class=w> </span><span class=c># 當更新時，Pod可以超過desired status數量的比例</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>progressDeadlineSeconds</span><span class=p>:</span><span class=w> </span><span class=m>600</span><span class=w>          </span><span class=c># 部屬的最長等待時間，當超過則回報&#34;failed progressing&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>minReadySeconds</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>                    </span><span class=c># 服務部屬後準備到可接收流量的時間</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>revisionHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>              </span><span class=c># 可rollback的版本數</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>                           </span><span class=c># 副本數</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>                             </span><span class=c># 定義label selector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>                             </span><span class=c># pod template</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.14.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>200m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>512Mi</span><span class=w>
</span></span></span></code></pre></div><h3 id=查看deployment>查看Deployment<a hidden class=anchor aria-hidden=true href=#查看deployment>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl get deployments.apps
</span></span><span class=line><span class=cl>NAME               READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>nginx-deployment   3/3     3            3           24m
</span></span><span class=line><span class=cl>&gt; kubectl get deployments.apps -o wide
</span></span><span class=line><span class=cl>NAME               READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES      SELECTOR
</span></span><span class=line><span class=cl>nginx-deployment   3/3     3            3           24m   nginx        nginx:1.8   app=nginx
</span></span></code></pre></div><h3 id=更新deployment>更新Deployment<a hidden class=anchor aria-hidden=true href=#更新deployment>#</a></h3><ul><li>更新image版本</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl set image deployment nginx-deployment nginx=nginx:1.9
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment image updated
</span></span><span class=line><span class=cl>&gt; kubectl get deployments.apps -o wide
</span></span><span class=line><span class=cl>NAME               READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES      SELECTOR
</span></span><span class=line><span class=cl>nginx-deployment   3/3     1            3           37m   nginx        nginx:1.9   app=nginx
</span></span></code></pre></div><ul><li>查看更新狀態</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl rollout status deployment nginx-deployment
</span></span><span class=line><span class=cl>deployment &#34;nginx-deployment&#34; successfully rolled out
</span></span></code></pre></div><ul><li>修改pod template</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl edit deployment nginx-deployment
</span></span></code></pre></div><h3 id=回退deployment>回退Deployment<a hidden class=anchor aria-hidden=true href=#回退deployment>#</a></h3><ul><li>檢查Deployment的升級歷史紀錄</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl rollout history deployment nginx-deployment
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment
</span></span><span class=line><span class=cl>REVISION  CHANGE-CAUSE
</span></span><span class=line><span class=cl>1         nginx:1.7.9
</span></span><span class=line><span class=cl>2         nginx:1.8
</span></span></code></pre></div><ul><li>查看特定版本的紀錄</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>&gt; kubectl rollout history deployment nginx-deployment --revision=2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>deployment.apps/nginx-deployment with revision</span><span class=w> </span><span class=c>#2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Pod Template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Labels</span><span class=p>:</span><span class=w>       </span><span class=l>app=nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>pod-template-hash=58f44756c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Annotations:  kubernetes.io/change-cause</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>nginx</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Image</span><span class=p>:</span><span class=w>      </span><span class=l>nginx:1.8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Port</span><span class=p>:</span><span class=w>       </span><span class=m>80</span><span class=l>/TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Host Port</span><span class=p>:</span><span class=w>  </span><span class=m>0</span><span class=l>/TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Environment</span><span class=p>:</span><span class=w>        </span><span class=l>&lt;none&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Mounts</span><span class=p>:</span><span class=w>     </span><span class=l>&lt;none&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Volumes</span><span class=p>:</span><span class=w>      </span><span class=l>&lt;none&gt;</span><span class=w>
</span></span></span></code></pre></div><ul><li>回退到指定版本</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl rollout undo deployment nginx-deployment --to-revision 1
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment rolled back
</span></span></code></pre></div><h3 id=擴縮deployment>擴縮Deployment<a hidden class=anchor aria-hidden=true href=#擴縮deployment>#</a></h3><ul><li>指定數量</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl scale deployment nginx-deployment --replicas 2
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment scaled
</span></span></code></pre></div><ul><li>水平自動擴縮，根據當前Pod的CPU利用率當作擴縮依據</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl autoscale deployment nginx-deployment --max 5 --min 3 --cpu-percent 70
</span></span></code></pre></div><blockquote><p>如果是使用minikube，得啟用metrics-server的addon</p><p>minikube addons list ## 查看minikube的addon
minikube addons enable metrics-server ## 啟用metrics-server的addon</p></blockquote><h3 id=暫停和恢復deployment>暫停和恢復Deployment<a hidden class=anchor aria-hidden=true href=#暫停和恢復deployment>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&gt; kubectl rollout pause deployment nginx-deployment
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment paused
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&gt; kubectl rollout resume deployment nginx-deployment
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment resumed
</span></span></code></pre></div><blockquote><p>在暫停期間任意修改deployment都不會更新，暫停前的狀態將繼續它的功能</p></blockquote><h2 id=deployment-cheat-sheet>Deployment cheat sheet<a hidden class=anchor aria-hidden=true href=#deployment-cheat-sheet>#</a></h2><p><img loading=lazy src=/assets/k8s-deploy/1.png alt></p><h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><ul><li><a href=https://kubernetes.io/docs/concepts/workloads/controllers/deployment/>Deployments | Kubernetes</a></li><li><a href=https://jimmysong.io/kubernetes-handbook/concepts/deployment.html>Deployment · Kubernetes 中文指南——云原生应用架构实战手册 (jimmysong.io)</a></li><li><a href=https://medium.com/andy-blog/kubernetes-%E9%82%A3%E4%BA%9B%E4%BA%8B-deployment-%E8%88%87-replicaset-%E4%B8%80-406234a63d43>Kubernetes 那些事 — Deployment 與 ReplicaSet（一） | by Andy Chen | Andy的技術分享blog | Medium</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://sz9751210.github.io/tags/devops/>devops</a></li><li><a href=https://sz9751210.github.io/tags/k8s/>k8s</a></li></ul><div class=post-meta>更新於: 2023-07-18</div><nav class=paginav><a class=prev href=https://sz9751210.github.io/posts/k8s-configmap/><span class=title>« Prev</span><br><span>Kubernetes ConfigMap</span>
</a><a class=next href=https://sz9751210.github.io/posts/vscode-wsl-ssh/><span class=title>Next »</span><br><span>vscode在wsl環境下連接ssh</span></a></nav><script src=https://utteranc.es/client.js repo=sz9751210/utterances issue-term=title theme=github-dark crossorigin=anonymous async></script><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on twitter" href="https://twitter.com/intent/tweet/?text=Kubernetes%20Deployment%ef%bc%9aOverview&amp;url=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f&amp;hashtags=devops%2ck8s"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f&amp;title=Kubernetes%20Deployment%ef%bc%9aOverview&amp;summary=Kubernetes%20Deployment%ef%bc%9aOverview&amp;source=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f&title=Kubernetes%20Deployment%ef%bc%9aOverview"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on whatsapp" href="https://api.whatsapp.com/send?text=Kubernetes%20Deployment%ef%bc%9aOverview%20-%20https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kubernetes Deployment：Overview on telegram" href="https://telegram.me/share/url?text=Kubernetes%20Deployment%ef%bc%9aOverview&amp;url=https%3a%2f%2fsz9751210.github.io%2fposts%2fk8s-deploy%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://sz9751210.github.io/>艾倫的程式之旅</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let detail=document.getElementsByClassName("details");details=[].slice.call(detail);for(let e=0;e<details.length;e++){let t=details[e];const n=t.getElementsByClassName("details-summary")[0];n&&n.addEventListener("click",()=>{t.classList.toggle("open")},!1)}</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>